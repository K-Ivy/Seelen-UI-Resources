id: "@k-ivy/win-grid-tray-la"
metadata:
  displayName: "Grid Style Tray - Always Show Label"
  author: "K-Ivy"
  description: "~ Tray Module"
  tags: ['toolbar']
  appTargetVersion:
    - 2
    - 4
    - 7
settings:
  - syntax: <url>
    name: '--ykiosdr-sorsas-ksaorlsd'
    label: "V2.0 - For Seelen v2.4.5+ Only"
    description: "> Please report any bugs/issues on my github page or in #resources post in the Seelen UI Discord."
    initialValue: 'https://github.com/K-Ivy/Seelen-UI-Resources/tree/main'

  - group:
      header: "✦ App Names"
      items:
        - syntax: <length>
          label: "● Maximum Characters Per Line"
          name: '--tray-la-max-length-per'
          initialValue: 51
          initialValueUnit: 'px'

        - syntax: <length>
          label: "● Font Size"
          name: '--tray-la-label-font-size'
          initialValue: 10
          initialValueUnit: 'px'

  - group:
      header: "✦ App Icons"
      items:
        - syntax: <length>
          label: "● Size"
          name: '--tray-la-app-icon-size'
          initialValue: 18
          initialValueUnit: 'px'

        - syntax: <number>
          label: "╰─ Scale on Hover"
          tip: "When hovering an app icon, the icon will be scaled up by the value set here."
          name: '--tray-la-app-icon-size-hover'
          initialValue: 1.16

        - syntax: <string>
          label: "╰・Scale Transition"
          name: '--tray-la-app-icon-transition'
          tip: "~~ ms/s ease, ease-in, ease-out, ease-in-out, linear, cubic-bezier(x1,y1,x2,y2)"
          initialValue: 'transform 0.3s cubic-bezier(0.33, 1, 0.68, 1)'

  - group:
      header: "✦ Base"
      items:
        - syntax: <length>
          label: "● Tray Padding"
          name: '--tray-la-padding'
          initialValue: 12
          initialValueUnit: 'px'

        - syntax: <number>
          label: "● Tray Mode"
          description: "0 = Compact | 1 = Soft"
          name: '--tray-la-spacing-choice'
          initialValue: 1
styles:
  "@seelen/system-tray": >-
    .system-tray {
      /* convert --tray-la-spacing-choice value (0, 1) to px:
        0 * 48px = 0px | 1 * 48px = 48px (to prevent user error) */
      --tray-la-spacing-calc: calc(var(--tray-la-spacing-choice, 1) * 48px);
      display: grid !important;
      grid-template-columns: repeat(auto-fit, minmax(var(--tray-la-spacing-calc), 1fr)) !important;
      grid-auto-rows: 60px !important;
      padding: var(--tray-la-padding, 12px) !important;
    }

    .system-tray-item {
      position: relative !important;
      flex-direction: column !important;
      padding: 0px 0px !important;
    }

    .system-tray-item-icon {
      position: relative !important;
      will-change: transform;
      height: var(--tray-la-app-icon-size, 18px) !important;
      width: var(--tray-la-app-icon-size, 18px) !important;
      bottom: -45% !important;
      transition: var(--tray-la-app-icon-transition, transform 0.3s cubic-bezier(0.33, 1, 0.68, 1)) !important;
    }

    .system-tray-item-icon:hover {
      transform: scale(var(--tray-la-app-icon-size-hover, 1.16)) !important;
    }

    .system-tray-item-label {
      position: absolute !important;
      display: -webkit-box !important;
      -webkit-box-orient: vertical;
      -webkit-line-clamp: 2; /* max lines */
      width: var(--tray-la-max-length-per, 51px) !important;
      font-size: var(--tray-la-label-font-size, 10px) !important;
      word-break: break-word;
      text-align: center;
      white-space: normal;
      top: 45% !important;
    }