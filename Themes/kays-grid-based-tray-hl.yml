id: "@k-ivy/win-grid-tray-hl"
metadata:
  displayName: "Grid Style Tray Menu - Hover for Label"
  author: "IriKay (@K-Ivy on Git)"
  description: "V2.0"
  tags: ['toolbar']
  appTargetVersion:
    - 2
    - 3
    - 8
settings:
  - syntax: <number>
    label: 
      en: "♦ Maximum Character Length of names (D = 15ch)"
      zh: "♦ 名称最大字符长度 (D = 15ch)"
    name: '--tray-hl-ch-length'
    initialValue: 15

  - syntax: <length>
    label: 
      en: "↳ Font Size of names (D = 10px)"
      zh: "↳ 名称字体大小 (D = 10px)"
    name: '--tray-hl-font-size'
    initialValue: 10
    initialValueUnit: 'px'

  - syntax: <string>
    label: 
      en: " ➙ Allow names to go beyond the tray (visible | hidden)"
      zh: " ➙ 允许名称超出托盘 (visible | hidden)"
    name: '--tray-hl-m-overflowxy-et'
    initialValue: 'visible'

  - syntax: <string>
    label: 
      en: " ➙ Text overflow style at the end (clip | ellipsis)"
      zh: " ➙ 文本溢出样式 (clip | ellipsis)"
    name: '--tray-hl-m-txt-overflow'
    initialValue: 'clip'

  - syntax: <length>
    label: 
      en: "↳ Start Height of names on hover (D = 3px)"
      zh: "↳ 悬停时名称起始高度 (D = 3px)"
    name: '--tray-hl-label-start'
    initialValue: 3
    initialValueUnit: 'px'

  - syntax: <length>
    label: 
      en: "↳ End Height of names on hover (D = 4px)"
      zh: "↳ 悬停时名称结束高度 (D = 4px)"
    name: '--tray-hl-label-end'
    initialValue: 4
    initialValueUnit: 'px'

  - syntax: <length>
    label: 
      en: "♦ App Icon Size (D = 22px)"
      zh: "♦ 应用图标大小 (D = 22px)"
    name: '--tray-hl-icon-height'
    initialValue: 22
    initialValueUnit: 'px'

  - syntax: <number>
    label: 
      en: "↳ App Icon Size on hover (D = 1.16)"
      zh: "↳ 悬停时应用图标大小 (D = 1.16)"
    name: '--tray-hl-app-hover-scale'
    initialValue: 1.16

  - syntax: <string>
    label: 
      en: "↳ Hovered App Icon Transition Control"
      zh: "↳ 悬停时应用图标过渡控制"
    name: '--tray-hl-app-hover-transition'
    initialValue: 'transform 0.3s cubic-bezier(0.33, 1, 0.68, 1)'

  - syntax: <length>
    label: 
      en: "Tray Vertical Padding (D = 6px)"
      zh: "托盘垂直内边距 (D = 6px)"
    name: '--tray-hl-padding-y'
    initialValue: 6
    initialValueUnit: 'px'

  - syntax: <length>
    label: 
      en: "Tray Horizontal Padding (D = 6px)"
      zh: "托盘水平内边距 (D = 6px)"
    name: '--tray-hl-padding-x'
    initialValue: 6
    initialValueUnit: 'px'

  - syntax: <length>
    label: 
      en: "Tray Item Gap (D = 8px)"
      zh: "托盘项目间距 (D = 8px)"
    name: '--tray-hl-item-gap'
    initialValue: 8
    initialValueUnit: 'px'

  - syntax: <length>
    label: 
      en: "Column Minimum Width (D = 54px)"
      zh: "列最小宽度 (D = 54px)"
    name: '--tray-hl-col-min'
    initialValue: 54
    initialValueUnit: 'px'

  - syntax: <length>
    label: 
      en: "Row Height (D = 48px)"
      zh: "行高度 (D = 48px)"
    name: '--tray-hl-row-height'
    initialValue: 48
    initialValueUnit: 'px'

  - syntax: <string>
    label: 
      en: "Visibility of Tooltip Popup when hovering names (visible | none)"
      zh: "悬停时名称的工具提示弹出可见性 (visible | none)"
    name: '--tray-hl-pointer-events'
    initialValue: 'visible'

styles:
  toolbar: |
    @keyframes fadeInLabel {
      from {
        opacity: 0;
        transform: translateX(-50%) translateY(var(--tray-hl-label-start));
      }
      to {
        opacity: 1;
        transform: translateX(-50%) translateY(var(--tray-hl-label-end));
      }
    }
    @keyframes fadeOutLabel {
      from {
        opacity: 1;
        transform: translateX(-50%) translateY(var(--tray-hl-label-end));
      }
      to {
        opacity: 0;
        transform: translateX(-50%) translateY(var(--tray-hl-label-start));
      }
    }

    .tray-list {
      display: grid !important;
      grid-template-columns: repeat(auto-fit, minmax(var(--tray-hl-col-min), 1fr)) !important;
      padding: var(--tray-hl-padding-y) var(--tray-hl-padding-x) !important;
      gap: var(--tray-hl-item-gap) !important;
      overflow-x: var(--tray-hl-m-overflowxy-et, visible) !important;
      overflow-y: var(--tray-hl-m-overflowxy-et, visible) !important;
    }

    .tray-item {
      display: flex !important;
      justify-content: center !important;
      align-items: center !important;
      position: relative !important;
      height: var(--tray-hl-row-height) !important;
    }

    .tray-item-icon {
      position: absolute !important;
      height: var(--tray-hl-icon-height) !important;
      will-change: transform;
      transform: translate(-50%, -60%) scale(1) !important;
      top: 56% !important;
      left: 50% !important;
      object-fit: contain;
      transition: var(--tray-hl-app-hover-transition, transform 0.3s cubic-bezier(0.33, 1, 0.68, 1)) !important;
    }

    .tray-item-icon:hover {
      transform: translate(-50%, -60%) scale(var(--tray-hl-app-hover-scale)) !important;
    }

    .tray-item-label {
       /* Force showing label for themes that hide it */
      display: block !important;
      position: absolute !important;
      bottom: 0 !important;
      left: 50% !important;
      transform: translateX(-50%);
      max-width: calc(var(--tray-hl-ch-length) * 1ch) !important;
      font-size: var(--tray-hl-font-size);
      /* Hides hover tooltips */
      pointer-events: var(--tray-hl-pointer-events, visible) !important;
      text-overflow: var(--tray-hl-m-txt-overflow, clip) !important;
    }

    .tray-item:hover .tray-item-label {
      animation: fadeInLabel 0.5s forwards;
    }

    .tray-item:not(:hover) .tray-item-label {
      animation: fadeOutLabel 0.4s forwards;
    }